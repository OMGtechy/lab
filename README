Useful things from a game I made refactored into a more general form.
